format_version: 1.2.0
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

title: Build script for Android

app:
  envs:
  - debug: "1"
  - gitRepositoryURL: "git@bitbucket.org:leftshift/clipboard-android.git"
  - gitRepositoryBranch: "develop"
  - package: "com.leftshift.clipboardapp"
  - mainActivity: "activities.CardActivity"
  - emailForSSHKey: "sudhanshu@leftshift.io"
  - emulatorName: "Nexus_5_API_22"
  - alwaysCleanBeforeBuild: "0"
  - alwaysUninstallOlderBuilds: "0"

  
workflows:

  setup-ssh:
    steps:
    - path::~/code/bitrise/bitrise-android/steps/setup-ssh:
        title: "Set SSH keys for this project"

  devices:
    steps:
    - path::~/code/bitrise/bitrise-android/steps/devices:
        title: "Find connected phycial devices"

  emulator:
    steps:
    - path::~/code/bitrise/bitrise-android/steps/emulator:
        title: "Load up the emulator"

  git-clone:
    steps:
    - path::~/code/bitrise/bitrise-android/steps/git-clone:
        title: "Clone the git repository"

  git-pull:
    steps:
    - path::~/code/bitrise/bitrise-android/steps/git-pull:
        title: "Pull the git repository"

  assemble:
    before_run:
    - git-pull
    steps:
    - path::~/code/bitrise/bitrise-android/steps/assemble:
        title: "Build the Android Project"

  install:
    before_run:
    - emulator
    - git-pull  
    steps:
    - path::~/code/bitrise/bitrise-android/steps/install:
        title: "Install the app on a device/emulator"